#!/usr/bin/env simplang

; Initialize string literals
ldstr s0 "The GCD of "
ldstr s1 " and "
ldstr s2 " is "
ldstr s3 "Enter first number: "
ldstr s4 "Enter second number: "

; Get the two numbers to operate on from the user
; They can be passed in as command line arguments,
; in which case we can skip prompting for the number
ifeq r0 0
    printn_s s3
    geti r0
endif
ifeq r1 0
    printn_s s4
    geti r1
endif

; Store the initial values in r2 and r3 so that we
; can print them at the end
asgn r2 r0
asgn r3 r1

; Calculate the GCD using Euclid's algorithm
beglp
    asgn r4 r1
    mod r1 r0 r1
    asgn r0 r4
endlpeq r1 0

; Form and print the final output
printn_s s0
printn r2
printn_s s1
printn r3
printn_s s2
print r0

done
